{"version":3,"file":"index.js","sources":["../node_modules/react/jsx-runtime.js","../node_modules/react/cjs/react-jsx-runtime.production.min.js","../src/usePhoenix/usePhoenix.ts","../src/PhoenixProvider.tsx","../src/useLatest.ts","../src/util.ts","../src/cache.ts","../src/useChannel/useChannel.ts","../src/useEvent/useEvent.ts","../src/usePresence/usePresence.tsx"],"sourcesContent":["'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n",null,null,null,null,null,null,null,null],"names":["jsxRuntimeModule","exports","f","require$$0","k","Symbol","for","l","m","Object","prototype","hasOwnProperty","n","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","p","key","ref","__self","__source","q","c","a","g","b","d","e","h","call","defaultProps","$$typeof","type","props","_owner","current","reactJsxRuntime_production_min","jsx","jsxs","PhoenixContext","React","createContext","usePhoenix","context","useContext","Error","cache","Map","useLatest","val","useRef","findChannel","socket","topic","channels","find","channel","createMeta","isSuccess","isLoading","isError","error","data","status","defaultMeta","undefined","cache$1","channelMeta","set","result","get","_ref","url","options","_objectWithoutPropertiesLoose","_excluded","children","onOpen","onClose","onError","_useState","useState","_useState2","isConnected","setConnected","_useState3","setError","socketRef","_options","useMemo","defaultListeners","useCallback","onMessage","_ref2","event","payload","forEach","_","startsWith","connect","Socket","useEffect","disconnect","_jsx","Provider","value","_usePhoenix","channelRef","meta","setMeta","optionsRef","messageRef","handleJoin","_channel","_topic","state","on","_optionsRef$current$p","_optionsRef$current","_optionsRef$current$p2","_optionsRef$current2","passive","params","join","receive","response","joinPush","recHooks","_optionsRef$current$p3","_optionsRef$current3","_optionsRef$current$p4","_optionsRef$current4","off","push","Promise","reject","resolve","pushPromise","leave","ChannelClass","_extends","listener","handler","loaded","setLoaded","setData","message","_presence","_setPresence","newState","prevState","keys","length","nextState","Presence","syncState","newDiff","syncDiff","map","metas","Array","isArray","id"],"mappings":"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","x_google_ignoreList":[0,1]}