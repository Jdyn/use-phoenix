{"version":3,"file":"index.js","sources":["../node_modules/react/jsx-runtime.js","../node_modules/react/cjs/react-jsx-runtime.production.min.js","../src/usePhoenix/usePhoenix.ts","../src/PhoenixProvider.tsx","../src/useLatest.ts","../src/util.ts","../src/cache.ts","../src/useChannel/useChannel.ts","../src/useEvent/useEvent.ts","../src/usePresence/usePresence.tsx"],"sourcesContent":["'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n",null,null,null,null,null,null,null,null],"names":["jsxRuntimeModule","exports","f","require$$0","k","Symbol","for","l","m","Object","prototype","hasOwnProperty","n","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","p","key","ref","__self","__source","q","c","a","g","b","d","e","h","call","defaultProps","$$typeof","type","props","_owner","current","reactJsxRuntime_production_min","jsx","jsxs","PhoenixContext","React","createContext","usePhoenix","context","useContext","Error","cache","Map","useLatest","val","useRef","findChannel","socket","topic","channels","find","channel","createMeta","isSuccess","isLoading","isError","error","data","status","defaultMeta","undefined","cache$1","channelMeta","set","result","get","_ref","url","options","_objectWithoutPropertiesLoose","_excluded","children","onOpen","onClose","onError","_useState","useState","_useState2","isConnected","setConnected","_useState3","setError","socketRef","defaultListeners","useCallback","onMessage","_ref2","event","payload","forEach","_","startsWith","connect","Socket","useEffect","disconnect","_jsx","Provider","value","_options","_usePhoenix","channelRef","meta","setMeta","optionsRef","messageRef","handleJoin","_channel","_topic","state","on","_optionsRef$current$p","_optionsRef$current","_optionsRef$current$p2","_optionsRef$current2","passive","existingChannel","params","join","receive","response","joinPush","recHooks","off","_optionsRef$current$p3","_optionsRef$current3","_optionsRef$current$p4","_optionsRef$current4","push","Promise","reject","resolve","pushPromise","leave","ChannelClass","_extends","listener","handler","loaded","setLoaded","setData","message","_presence","_setPresence","newState","prevState","keys","length","nextState","Presence","syncState","newDiff","syncDiff","useMemo","map","metas","Array","isArray","id"],"mappings":"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","x_google_ignoreList":[0,1]}